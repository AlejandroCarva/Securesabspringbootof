<!-- Fragmento reutilizable del sidebar para vigilante -->
<div th:fragment="sidebarVigilante">
    <button id="toggleMenuBtn" class="menu-toggle" aria-controls="sidebar" aria-expanded="false" title="Alternar menú lateral" aria-label="Alternar menú lateral" style="display:inline-flex; z-index:2500; background: #00b894; color: #fff;">
        <i class="fas fa-bars" aria-hidden="true"></i>
    </button>

    <aside class="sidebar" id="sidebar">
        <!-- Bloque de perfil: muestra nombre y avatar si existe el atributo 'usuario' en el modelo -->
        <div class="sidebar-profile" style="display:flex;align-items:center;gap:12px;margin-bottom:18px;padding:8px 6px;">
            <div class="user-avatar" style="width:48px;height:48px;border-radius:50%;background:#ffffff22;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px;">
                <i class="fas fa-user" th:if="${usuario == null}"></i>
                <span th:if="${usuario != null}" th:text="${#strings.substring(usuario.nombre,0,1) + #strings.substring(usuario.apellido,0,1)}"></span>
            </div>
            <div class="user-info">
                <div class="user-name" th:if="${usuario != null}" th:text="${usuario.nombre + ' ' + usuario.apellido}"></div>
                <div class="user-name" th:if="${usuario == null}">Vigilante</div>
                <div style="font-size:12px;color:rgba(255,255,255,0.85);">@<span th:if="${usuario != null}" th:text="${usuario.correo}"></span><span th:if="${usuario == null}">vigilante</span></div>
            </div>
        </div>

        <nav aria-label="Menú Principal de la Aplicación">
            <ul id="menu" class="nav">
                <li class="nav-item" th:class="${activePage == 'consultar-invitados'} ? 'nav-item active' : 'nav-item'">
                    <a th:href="@{/vigilante/consultar-invitados}" class="nav-link">
                        <i class="fas fa-users"></i>
                        <span>Consultar Invitados</span>
                    </a>
                </li>

                <li class="nav-item" th:class="${activePage == 'registrar-invitados'} ? 'nav-item active' : 'nav-item'">
                    <a th:href="@{/vigilante/registrar-invitados}" class="nav-link">
                        <i class="fas fa-user-plus"></i>
                        <span>Registrar Invitados</span>
                    </a>
                </li>

                <li class="nav-item" th:class="${activePage == 'registro-manual'} ? 'nav-item active' : 'nav-item'">
                    <a th:href="@{/vigilante/registro-manual}" class="nav-link">
                        <i class="fas fa-edit"></i>
                        <span>Registro Manual</span>
                    </a>
                </li>

                <li class="nav-item" th:class="${activePage == 'historial-registro'} ? 'nav-item active' : 'nav-item'">
                    <a th:href="@{/vigilante/historial-registro}" class="nav-link">
                        <i class="fas fa-history"></i>
                        <span>Historial de Registros</span>
                    </a>
                </li>

                <li class="nav-item" th:class="${activePage == 'perfil'} ? 'nav-item active' : 'nav-item'">
                    <a th:href="@{/vigilante/perfil}" class="nav-link">
                        <i class="fas fa-user"></i>
                        <span>Mi Perfil</span>
                    </a>
                </li>
            </ul>
        </nav>


        <div class="sidebar-footer" style="margin-top:18px;">
            <div class="sidebar-logo">
                <span class="logo-text">secure</span>
                <span class="logo-highlight">Sab</span>
            </div>
        </div>
    </aside>

    <script th:src="@{/js/sidebar.js}"></script>
</div>
